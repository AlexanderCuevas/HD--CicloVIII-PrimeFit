{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet CarritoComponent = class CarritoComponent {\n  constructor(carritoService, authService, router) {\n    this.carritoService = carritoService;\n    this.authService = authService;\n    this.router = router;\n    this.items = [];\n    this.loading = false;\n    this.showLoginPrompt = false;\n  }\n  ngOnInit() {\n    this.cargarCarrito();\n  }\n  cargarCarrito() {\n    // Cargar desde localStorage\n    const carritoGuardado = localStorage.getItem('carrito');\n    if (carritoGuardado) {\n      this.items = JSON.parse(carritoGuardado);\n    }\n  }\n  get subtotal() {\n    return this.items.reduce((sum, item) => sum + item.precio * item.cantidad, 0);\n  }\n  get impuestos() {\n    return this.subtotal * 0.18; // 18% IGV\n  }\n  get envio() {\n    return this.subtotal > 50 ? 0 : 5.99;\n  }\n  get total() {\n    return this.subtotal + this.impuestos + this.envio;\n  }\n  get totalItems() {\n    return this.items.reduce((sum, item) => sum + item.cantidad, 0);\n  }\n  aumentarCantidad(item) {\n    item.cantidad++;\n    this.guardarCarrito();\n  }\n  disminuirCantidad(item) {\n    if (item.cantidad > 1) {\n      item.cantidad--;\n      this.guardarCarrito();\n    }\n  }\n  eliminarItem(index) {\n    this.items.splice(index, 1);\n    this.guardarCarrito();\n  }\n  vaciarCarrito() {\n    if (confirm('¿Estás seguro de vaciar el carrito?')) {\n      this.items = [];\n      this.guardarCarrito();\n    }\n  }\n  guardarCarrito() {\n    localStorage.setItem('carrito', JSON.stringify(this.items));\n  }\n  procederAlPago() {\n    // Verificar si está logueado\n    if (this.authService.isLoggedIn()) {\n      // Ir al checkout\n      this.router.navigate(['/checkout']);\n    } else {\n      // Mostrar prompt de login\n      this.showLoginPrompt = true;\n    }\n  }\n  continuarComprando() {\n    this.router.navigate(['/']);\n  }\n  irALogin() {\n    this.router.navigate(['/login']);\n  }\n  cerrarPrompt() {\n    this.showLoginPrompt = false;\n  }\n};\nCarritoComponent = __decorate([Component({\n  selector: 'app-carrito',\n  templateUrl: './carrito.component.html',\n  styleUrls: ['./carrito.component.css']\n})], CarritoComponent);\nexport { CarritoComponent };","map":{"version":3,"names":["Component","CarritoComponent","constructor","carritoService","authService","router","items","loading","showLoginPrompt","ngOnInit","cargarCarrito","carritoGuardado","localStorage","getItem","JSON","parse","subtotal","reduce","sum","item","precio","cantidad","impuestos","envio","total","totalItems","aumentarCantidad","guardarCarrito","disminuirCantidad","eliminarItem","index","splice","vaciarCarrito","confirm","setItem","stringify","procederAlPago","isLoggedIn","navigate","continuarComprando","irALogin","cerrarPrompt","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\rodri\\OneDrive\\Escritorio\\HERRAMIENTAS DESARROLLO\\PRIME-FINAL\\HD--CicloVIII-PrimeFit\\App-Front\\src\\app\\components\\carrito\\carrito.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CarritoService } from '../../services/carrito.service';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\nexport interface ItemCarrito {\r\n  id: string;\r\n  platoId: string;\r\n  nombre: string;\r\n  precio: number;\r\n  cantidad: number;\r\n  imagen: string;\r\n  restauranteNombre: string;\r\n  calorias?: number;\r\n  proteinas?: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-carrito',\r\n  templateUrl: './carrito.component.html',\r\n  styleUrls: ['./carrito.component.css']\r\n})\r\nexport class CarritoComponent implements OnInit {\r\n  items: ItemCarrito[] = [];\r\n  loading = false;\r\n  showLoginPrompt = false;\r\n\r\n  constructor(\r\n    private carritoService: CarritoService,\r\n    private authService: AuthService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.cargarCarrito();\r\n  }\r\n\r\n  cargarCarrito() {\r\n    // Cargar desde localStorage\r\n    const carritoGuardado = localStorage.getItem('carrito');\r\n    if (carritoGuardado) {\r\n      this.items = JSON.parse(carritoGuardado);\r\n    }\r\n  }\r\n\r\n  get subtotal(): number {\r\n    return this.items.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);\r\n  }\r\n\r\n  get impuestos(): number {\r\n    return this.subtotal * 0.18; // 18% IGV\r\n  }\r\n\r\n  get envio(): number {\r\n    return this.subtotal > 50 ? 0 : 5.99;\r\n  }\r\n\r\n  get total(): number {\r\n    return this.subtotal + this.impuestos + this.envio;\r\n  }\r\n\r\n  get totalItems(): number {\r\n    return this.items.reduce((sum, item) => sum + item.cantidad, 0);\r\n  }\r\n\r\n  aumentarCantidad(item: ItemCarrito) {\r\n    item.cantidad++;\r\n    this.guardarCarrito();\r\n  }\r\n\r\n  disminuirCantidad(item: ItemCarrito) {\r\n    if (item.cantidad > 1) {\r\n      item.cantidad--;\r\n      this.guardarCarrito();\r\n    }\r\n  }\r\n\r\n  eliminarItem(index: number) {\r\n    this.items.splice(index, 1);\r\n    this.guardarCarrito();\r\n  }\r\n\r\n  vaciarCarrito() {\r\n    if (confirm('¿Estás seguro de vaciar el carrito?')) {\r\n      this.items = [];\r\n      this.guardarCarrito();\r\n    }\r\n  }\r\n\r\n  guardarCarrito() {\r\n    localStorage.setItem('carrito', JSON.stringify(this.items));\r\n  }\r\n\r\n  procederAlPago() {\r\n    // Verificar si está logueado\r\n    if (this.authService.isLoggedIn()) {\r\n      // Ir al checkout\r\n      this.router.navigate(['/checkout']);\r\n    } else {\r\n      // Mostrar prompt de login\r\n      this.showLoginPrompt = true;\r\n    }\r\n  }\r\n\r\n  continuarComprando() {\r\n    this.router.navigate(['/']);\r\n  }\r\n\r\n  irALogin() {\r\n    this.router.navigate(['/login']);\r\n  }\r\n\r\n  cerrarPrompt() {\r\n    this.showLoginPrompt = false;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}