{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./auth.service\";\nexport class PedidoService {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.apiUrl = 'http://localhost:3000/api/pedidos';\n  }\n  getHeaders() {\n    const token = this.authService.getToken();\n    return new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n  }\n  crearPedido(pedidoData) {\n    return this.http.post(this.apiUrl, pedidoData, {\n      headers: this.getHeaders()\n    });\n  }\n  getMisPedidos() {\n    return this.http.get(`${this.apiUrl}/mis-pedidos`, {\n      headers: this.getHeaders()\n    });\n  }\n  getPedidos() {\n    return this.getMisPedidos();\n  }\n  getPedidoById(id) {\n    return this.http.get(`${this.apiUrl}/${id}`, {\n      headers: this.getHeaders()\n    });\n  }\n  cancelarPedido(id) {\n    return this.http.post(`${this.apiUrl}/${id}/cancelar`, {}, {\n      headers: this.getHeaders()\n    });\n  }\n  // Métodos para administrador\n  obtenerTodosPedidos() {\n    return this.http.get(`${this.apiUrl}/todos`, {\n      headers: this.getHeaders()\n    });\n  }\n  actualizarEstadoPedido(id, estado) {\n    return this.http.patch(`${this.apiUrl}/${id}/estado`, {\n      estado\n    }, {\n      headers: this.getHeaders()\n    });\n  }\n  static {\n    this.ɵfac = function PedidoService_Factory(t) {\n      return new (t || PedidoService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AuthService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: PedidoService,\n      factory: PedidoService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["HttpHeaders","PedidoService","constructor","http","authService","apiUrl","getHeaders","token","getToken","crearPedido","pedidoData","post","headers","getMisPedidos","get","getPedidos","getPedidoById","id","cancelarPedido","obtenerTodosPedidos","actualizarEstadoPedido","estado","patch","i0","ɵɵinject","i1","HttpClient","i2","AuthService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\rodri\\OneDrive\\Escritorio\\HERRAMIENTAS DESARROLLO\\PRIME-FINAL\\HD--CicloVIII-PrimeFit\\App-Front\\src\\app\\services\\pedido.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { AuthService } from './auth.service';\r\n\r\nexport interface Pedido {\r\n  id: number;\r\n  usuarioId: number;\r\n  items: any[];\r\n  subtotal: number;\r\n  costoEnvio: number;\r\n  total: number;\r\n  direccionEntrega: string;\r\n  estado: string;\r\n  fechaPedido: string;\r\n  fechaActualizacion: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PedidoService {\r\n  private apiUrl = 'http://localhost:3000/api/pedidos';\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private authService: AuthService\r\n  ) { }\r\n\r\n  private getHeaders(): HttpHeaders {\r\n    const token = this.authService.getToken();\r\n    return new HttpHeaders({\r\n      'Authorization': `Bearer ${token}`\r\n    });\r\n  }\r\n\r\n  crearPedido(pedidoData: any): Observable<any> {\r\n    return this.http.post<any>(\r\n      this.apiUrl,\r\n      pedidoData,\r\n      { headers: this.getHeaders() }\r\n    );\r\n  }\r\n\r\n  getMisPedidos(): Observable<Pedido[]> {\r\n    return this.http.get<Pedido[]>(\r\n      `${this.apiUrl}/mis-pedidos`,\r\n      { headers: this.getHeaders() }\r\n    );\r\n  }\r\n\r\n  getPedidos(): Observable<Pedido[]> {\r\n    return this.getMisPedidos();\r\n  }\r\n\r\n  getPedidoById(id: number): Observable<Pedido> {\r\n    return this.http.get<Pedido>(\r\n      `${this.apiUrl}/${id}`,\r\n      { headers: this.getHeaders() }\r\n    );\r\n  }\r\n\r\n  cancelarPedido(id: number): Observable<Pedido> {\r\n    return this.http.post<Pedido>(\r\n      `${this.apiUrl}/${id}/cancelar`,\r\n      {},\r\n      { headers: this.getHeaders() }\r\n    );\r\n  }\r\n\r\n  // Métodos para administrador\r\n  obtenerTodosPedidos(): Observable<Pedido[]> {\r\n    return this.http.get<Pedido[]>(\r\n      `${this.apiUrl}/todos`,\r\n      { headers: this.getHeaders() }\r\n    );\r\n  }\r\n\r\n  actualizarEstadoPedido(id: number, estado: string): Observable<Pedido> {\r\n    return this.http.patch<Pedido>(\r\n      `${this.apiUrl}/${id}/estado`,\r\n      { estado },\r\n      { headers: this.getHeaders() }\r\n    );\r\n  }\r\n}\r\n"],"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;;;;AAoB9D,OAAM,MAAOC,aAAa;EAGxBC,YACUC,IAAgB,EAChBC,WAAwB;IADxB,KAAAD,IAAI,GAAJA,IAAI;IACJ,KAAAC,WAAW,GAAXA,WAAW;IAJb,KAAAC,MAAM,GAAG,mCAAmC;EAKhD;EAEIC,UAAUA,CAAA;IAChB,MAAMC,KAAK,GAAG,IAAI,CAACH,WAAW,CAACI,QAAQ,EAAE;IACzC,OAAO,IAAIR,WAAW,CAAC;MACrB,eAAe,EAAE,UAAUO,KAAK;KACjC,CAAC;EACJ;EAEAE,WAAWA,CAACC,UAAe;IACzB,OAAO,IAAI,CAACP,IAAI,CAACQ,IAAI,CACnB,IAAI,CAACN,MAAM,EACXK,UAAU,EACV;MAAEE,OAAO,EAAE,IAAI,CAACN,UAAU;IAAE,CAAE,CAC/B;EACH;EAEAO,aAAaA,CAAA;IACX,OAAO,IAAI,CAACV,IAAI,CAACW,GAAG,CAClB,GAAG,IAAI,CAACT,MAAM,cAAc,EAC5B;MAAEO,OAAO,EAAE,IAAI,CAACN,UAAU;IAAE,CAAE,CAC/B;EACH;EAEAS,UAAUA,CAAA;IACR,OAAO,IAAI,CAACF,aAAa,EAAE;EAC7B;EAEAG,aAAaA,CAACC,EAAU;IACtB,OAAO,IAAI,CAACd,IAAI,CAACW,GAAG,CAClB,GAAG,IAAI,CAACT,MAAM,IAAIY,EAAE,EAAE,EACtB;MAAEL,OAAO,EAAE,IAAI,CAACN,UAAU;IAAE,CAAE,CAC/B;EACH;EAEAY,cAAcA,CAACD,EAAU;IACvB,OAAO,IAAI,CAACd,IAAI,CAACQ,IAAI,CACnB,GAAG,IAAI,CAACN,MAAM,IAAIY,EAAE,WAAW,EAC/B,EAAE,EACF;MAAEL,OAAO,EAAE,IAAI,CAACN,UAAU;IAAE,CAAE,CAC/B;EACH;EAEA;EACAa,mBAAmBA,CAAA;IACjB,OAAO,IAAI,CAAChB,IAAI,CAACW,GAAG,CAClB,GAAG,IAAI,CAACT,MAAM,QAAQ,EACtB;MAAEO,OAAO,EAAE,IAAI,CAACN,UAAU;IAAE,CAAE,CAC/B;EACH;EAEAc,sBAAsBA,CAACH,EAAU,EAAEI,MAAc;IAC/C,OAAO,IAAI,CAAClB,IAAI,CAACmB,KAAK,CACpB,GAAG,IAAI,CAACjB,MAAM,IAAIY,EAAE,SAAS,EAC7B;MAAEI;IAAM,CAAE,EACV;MAAET,OAAO,EAAE,IAAI,CAACN,UAAU;IAAE,CAAE,CAC/B;EACH;;;uBA/DWL,aAAa,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,WAAA;IAAA;EAAA;;;aAAb3B,aAAa;MAAA4B,OAAA,EAAb5B,aAAa,CAAA6B,IAAA;MAAAC,UAAA,EAFZ;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}